import{r as s,j as e}from"./app-CvfNB7ra.js";import{c as Y,d as G,s as C,e as h,b as p,u as J,f as Q,h as Z,j as $,k as ee,l as te,i as re,I as N}from"./IconButton-D5b0Ojme.js";import{r as oe}from"./createSvgIcon-COTNUewJ.js";import{d as ae,a as ie,A as se,L as R}from"./Inventory-T9T7q22q.js";import{B as F}from"./Button-HP1_PD-1.js";import{u as ne,T as le}from"./Typography-BRzJn4xP.js";import{B as ce,M as de,F as pe}from"./Modal-wYIQB4SX.js";import{P as O,L as ue}from"./Menu-DaDftulN.js";import{A as me,T as xe,S as he}from"./Toolbar-BBsujruw.js";import{G as d}from"./Grid-CKhAo9Bo.js";import{A as fe}from"./Autocomplete-CKr0nnNY.js";import{B as ge}from"./Box-Bwlq-kWd.js";import{T as L}from"./TextField-CaXReFFn.js";import{A as be,D as je}from"./Delete-C3QQXyP7.js";import{L as ve}from"./ListItemAvatar-DW9Ws2uE.js";import"./index-BHBGyOd0.js";import"./ListContext-D5ol0eb0.js";import"./useFormControl-CbGBBbC6.js";function ke(o){return G("MuiDialog",o)}const Ce=Y("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),M=Ce,ye=s.createContext({}),We=ye,Se=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],De=C(ce,{name:"MuiDialog",slot:"Backdrop",overrides:(o,r)=>r.backdrop})({zIndex:-1}),Pe=o=>{const{classes:r,scroll:i,maxWidth:l,fullWidth:u,fullScreen:m}=o,c={root:["root"],container:["container",`scroll${h(i)}`],paper:["paper",`paperScroll${h(i)}`,`paperWidth${h(String(l))}`,u&&"paperFullWidth",m&&"paperFullScreen"]};return ee(c,ke,r)},Be=C(de,{name:"MuiDialog",slot:"Root",overridesResolver:(o,r)=>r.root})({"@media print":{position:"absolute !important"}}),Te=C("div",{name:"MuiDialog",slot:"Container",overridesResolver:(o,r)=>{const{ownerState:i}=o;return[r.container,r[`scroll${h(i.scroll)}`]]}})(({ownerState:o})=>p({height:"100%","@media print":{height:"auto"},outline:0},o.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},o.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),Ae=C(O,{name:"MuiDialog",slot:"Paper",overridesResolver:(o,r)=>{const{ownerState:i}=o;return[r.paper,r[`scrollPaper${h(i.scroll)}`],r[`paperWidth${h(String(i.maxWidth))}`],i.fullWidth&&r.paperFullWidth,i.fullScreen&&r.paperFullScreen]}})(({theme:o,ownerState:r})=>p({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},r.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},r.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!r.maxWidth&&{maxWidth:"calc(100% - 64px)"},r.maxWidth==="xs"&&{maxWidth:o.breakpoints.unit==="px"?Math.max(o.breakpoints.values.xs,444):`max(${o.breakpoints.values.xs}${o.breakpoints.unit}, 444px)`,[`&.${M.paperScrollBody}`]:{[o.breakpoints.down(Math.max(o.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},r.maxWidth&&r.maxWidth!=="xs"&&{maxWidth:`${o.breakpoints.values[r.maxWidth]}${o.breakpoints.unit}`,[`&.${M.paperScrollBody}`]:{[o.breakpoints.down(o.breakpoints.values[r.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},r.fullWidth&&{width:"calc(100% - 64px)"},r.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${M.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),$e=s.forwardRef(function(r,i){const l=J({props:r,name:"MuiDialog"}),u=ne(),m={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{"aria-describedby":c,"aria-labelledby":b,BackdropComponent:f,BackdropProps:y,children:x,className:W,disableEscapeKeyDown:j=!1,fullScreen:v=!1,fullWidth:S=!1,maxWidth:D="sm",onBackdropClick:t,onClose:a,open:n,PaperComponent:P=O,PaperProps:w={},scroll:z="paper",TransitionComponent:U=pe,transitionDuration:I=m,TransitionProps:q}=l,H=Q(l,Se),k=p({},l,{disableEscapeKeyDown:j,fullScreen:v,fullWidth:S,maxWidth:D,scroll:z}),B=Pe(k),T=s.useRef(),K=g=>{T.current=g.target===g.currentTarget},V=g=>{T.current&&(T.current=null,t&&t(g),a&&a(g,"backdropClick"))},A=Z(b),X=s.useMemo(()=>({titleId:A}),[A]);return e.jsx(Be,p({className:$(B.root,W),closeAfterTransition:!0,components:{Backdrop:De},componentsProps:{backdrop:p({transitionDuration:I,as:f},y)},disableEscapeKeyDown:j,onClose:a,open:n,ref:i,onClick:V,ownerState:k},H,{children:e.jsx(U,p({appear:!0,in:n,timeout:I,role:"presentation"},q,{children:e.jsx(Te,{className:$(B.container),onMouseDown:K,ownerState:k,children:e.jsx(Ae,p({as:P,elevation:24,role:"dialog","aria-describedby":c,"aria-labelledby":A},w,{className:$(B.paper,w.className),ownerState:k,children:e.jsx(We.Provider,{value:X,children:x})}))})}))}))}),Me=$e,_e=te(e.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder");var _={},we=re;Object.defineProperty(_,"__esModule",{value:!0});var E=_.default=void 0,Ie=we(oe()),Ne=e;E=_.default=(0,Ie.default)((0,Ne.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const Re=s.forwardRef(function(r,i){return e.jsx(he,{direction:"up",ref:i,...r})});function rt({products:o,offer:r,onChange:i}){const l="PRODUCTOS",[u,m]=s.useState(!1);s.useState(!1);const[c,b]=s.useState(Array.from(r.products||[]).map(t=>({product:t,product_count:t.pivot.product_count}))),[f,y]=s.useState(),[x,W]=s.useState(0),j=()=>{m(!0)},v=()=>{m(!1)},S=t=>{f!=null&&x>0&&b(a=>{const n=a.find(({product:P})=>P.id==f.id);return n?(n.product_count=Number(n.product_count)+Number(x),[...a]):[...a,{product:f,product_count:x}]})},D=t=>()=>{b([...c.filter(({product:a})=>t.id!==a.id)])};return s.useEffect(()=>{i&&i(c)},[c]),e.jsxs(s.Fragment,{children:[e.jsx(F,{variant:"outlined",color:"error",onClick:j,startIcon:e.jsx(ae,{}),children:l}),e.jsxs(Me,{fullScreen:!0,open:u,onClose:v,TransitionComponent:Re,children:[e.jsx(me,{sx:{position:"sticky",top:0},children:e.jsxs(xe,{children:[e.jsx(N,{edge:"start",color:"inherit",onClick:v,"aria-label":"close",children:e.jsx(E,{})}),e.jsx(le,{align:"center",sx:{ml:2,left:"-20px",position:"relative",flex:1},variant:"h6",component:"div",children:l})]})}),e.jsx(d,{className:"sticky pt-2 top-14 bg-white z-10",container:!0,columns:12,justifyContent:"center",children:e.jsxs(d,{item:!0,xs:12,md:6,className:"mt-2 px-2",container:!0,children:[e.jsx(d,{item:!0,xs:!0,md:!0,className:"pr-1",children:e.jsx(fe,{fullWidth:!0,options:o,autoHighlight:!0,getOptionLabel:t=>t.name,getOptionKey:t=>t.id,onChange:(t,a)=>y(a),isOptionEqualToValue:(t,a)=>t.id==a.id,renderOption:(t,a)=>{var n;return e.jsxs(ge,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...t,children:[e.jsx("img",{loading:"lazy",width:"40",src:a.image?`/storage/${(n=a.image)==null?void 0:n.url}`:"",alt:""}),a.name]},a.id)},renderInput:t=>e.jsx(L,{label:"Elige un producto",name:"name",inputProps:{...t.inputProps,autoComplete:"new-password"},...t})})}),e.jsx(d,{item:!0,xs:3,md:3,children:e.jsx(L,{fullWidth:!0,label:"Cantidad",type:"number",step:"any",variant:"outlined",value:x,onChange:t=>W(t.target.value)})}),e.jsx(d,{item:!0,xs:2,md:2,display:"flex",justifyContent:"center",className:"px-3",children:e.jsx(F,{onClick:S,type:"button",variant:"contained",className:"w-full",startIcon:e.jsx(be,{}),children:"Add"})})]})}),e.jsxs(d,{container:!0,columns:12,children:[e.jsx(d,{item:!0,xs:0,md:3}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(ue,{children:Array.from(c).map(t=>e.jsxs(ie,{secondaryAction:e.jsx(N,{edge:"end","aria-label":"delete",onClick:D(t.product),children:e.jsx(je,{})}),className:"flex-wrap",children:[e.jsx(ve,{children:e.jsx(se,{children:t.product.image?e.jsx("img",{loading:"lazy",width:"40",src:`/storage/${t.product.image.url}`,alt:""}):e.jsx(_e,{})})}),e.jsx(R,{className:"flex-1",primary:t.product.name,secondary:String(t.product.stock)+t.product.um}),e.jsx(R,{secondary:String(t.product_count)+t.product.um,sx:{"& > p":{color:t.product_count>t.product.stock?"red":"black"}}})]},t.product.id))})})]})]})]})}export{rt as default};
